var shortcodesTokenizer=function(n){var t={};function e(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var i in n)e.d(r,i,function(t){return n[t]}.bind(null,i));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=0)}([function(n,t,e){"use strict";function r(n,t){var e="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=a(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){e=e.call(n)},n:function(){var n=e.next();return u=n.done,n},e:function(n){s=!0,o=n},f:function(){try{u||null==e.return||e.return()}finally{if(s)throw o}}}}function i(n){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function o(n){return function(n){if(Array.isArray(n))return u(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||a(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(n,t){if(n){if("string"==typeof n)return u(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(n,t):void 0}}function u(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function l(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function c(n,t,e){return t&&l(n.prototype,t),e&&l(n,e),n}e.r(t),e.d(t,"Token",(function(){return E})),e.d(t,"default",(function(){return w}));var f="ROOT",h="TEXT",p="CUSTOM",d="[a-zA-Z][a-zA-Z0-9_-]*",y="(?:(?:[a-zA-Z][a-zA-Z0-9_-]*=\\d+\\.\\d+|[a-zA-Z][a-zA-Z0-9_-]*=\\d+|[a-zA-Z][a-zA-Z0-9_-]*=[^\"^'\\]\\s]+|[a-zA-Z][a-zA-Z0-9_-]*=\"[^\\]\"]*\"|[a-zA-Z][a-zA-Z0-9_-]*='[^\\]']*'|[a-zA-Z][a-zA-Z0-9_-]*)(?:(?!\\s+/?\\])|\\s*|))+",v="\\[("+d+")(\\s"+y+")?\\]",b="\\[("+d+")(\\s"+y+")?\\s?\\/\\]",g=new RegExp(y.substring(0,y.length-1),"ig"),m=new RegExp("\\[\\/?[a-zA-Z][^\\]]+\\]","i"),S=new RegExp(v,"i"),k=new RegExp("\\[\\/([a-zA-Z][a-zA-Z0-9_-]*)\\]","i"),O=new RegExp(b,"i");var E=function(){function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;s(this,n),this.id=o(Array(10)).map((function(n){return(~~(36*Math.random())).toString(36)})).join(""),this.name=null,this.type=t,this.body=e,this.pos=r,this.children=[],this.params={},this.isClosed="SELF_CLOSING"===t,this.init()}return c(n,[{key:"init",value:function(){if(![h,f,p].includes(this.type)){var n=this.matchBody();this.initName(n),n[2]&&this.initParams(n[2])}}},{key:"initName",value:function(n){this.name=n[1]}},{key:"initParams",value:function(n){var t=n.match(g);this.params=t.reduce((function(n,t){var e=(t=t.trim()).indexOf("=");return~e?n[t.substring(0,e)]=t.substring(e+1).replace(/(^['"]|['"]$)/g,""):n[t]=!0,n}),{})}},{key:"buildParams",value:function(){for(var n="",t=0,e=Object.keys(this.params);t<e.length;t++){var r=e[t],o=this.params[r],a=i(o);if("string"===a)n="".concat(n," ").concat(r,'="').concat(o,'"');else if("boolean"===a){var u=o?"yes":"no";n="".concat(n," ").concat(r,"=").concat(u)}else n="".concat(n," ").concat(r,"=").concat(o)}return n}},{key:"toString",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n instanceof Object&&(this.params=n);var e="string"==typeof n?" ".concat(n.trim()):this.buildParams();if(this.type===h)return this.body.trim()+"\n";if(this.children.length){var r=this.children.reduce((function(n,e){return n+"  ".repeat(t)+e.toString(null,t+1)}),"");return"[".concat(this.name).concat(e,"]\n").concat(r).concat("  ".repeat(t-1),"[/").concat(this.name,"]\n")}return"[".concat(this.name).concat(e,"]\n")}},{key:"matchBody",value:function(){var n;if("CLOSE"===this.type)n=k;else if("OPEN"===this.type)n=S;else{if("SELF_CLOSING"!==this.type)throw new SyntaxError("Unknown token: "+this.type);n=O}var t=this.body.match(n);if(null===t)throw new SyntaxError("Invalid "+this.type+" token: "+this.body);return t}},{key:"canClose",value:function(n){return this.name===n.name}}]),n}(),w=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{strict:!0,skipWhiteSpace:!1};s(this,n),"boolean"==typeof e&&(e={strict:e,skipWhiteSpace:!1}),this.options=Object.assign({strict:!0,skipWhiteSpace:!1},e),this.buf=null,this.originalBuf=null,this.pos=0,t&&this.input(t)}return c(n,[{key:"input",value:function(n){if("string"!=typeof n)throw new Error("Invalid input");return this.buf=this.originalBuf=n,this.pos=0,this}},{key:"reset",value:function(){return this.buf=this.originalBuf,this.pos=0,this}},{key:"tokens",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(n&&this.input(n),"string"!=typeof this.buf)throw new Error("Invalid input");for(var t=[],e=[];null!==(t=this._next());)t=Array.isArray(t)?t:[t],e.push.apply(e,o(t));return e}},{key:"ast",value:function(){var n,t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this.tokens(e),o=[],a=new E(f),u=a,s=r(i);try{for(s.s();!(t=s.n()).done;)if((n=t.value).type===h){if(this.options.skipWhiteSpace&&0===n.body.replace(/\s+/g,"").length)continue;u.children.push(n)}else if("OPEN"===n.type)u.children.push(n),o.push(u),u=n;else if("CLOSE"===n.type)n.canClose(u)?(u.isClosed=!0,u=o.pop()):u=this.handleSelfClosingTokens(u,n,o);else{if("SELF_CLOSING"!==n.type)throw new SyntaxError("Unknown token: "+n.type);u.children.push(n)}}catch(n){s.e(n)}finally{s.f()}return u!==a&&this.handleSelfClosingTokens(u,n,o),a.children}},{key:"handleSelfClosingTokens",value:function(n,t,e){var r=this.findOpenIdx(t,e),i=e[r];i.isClosed=!0,e.push(n);for(var o=r+1;o<e.length;o++)n=e[o],this.closeTokenAndMoveChildren(n,i),i.children.find((function(t){return t===n}))||i.children.push(n);return e.splice(r+1),e.pop(),n=e.pop()}},{key:"findOpenIdx",value:function(n,t){for(var e=null,r=t.length-1;r>=0;r--)if(t[r].canClose(n)){e=r;break}return null===e&&(e=0),e}},{key:"closeTokenAndMoveChildren",value:function(n,t){n.isClosed=!0,n.type="SELF_CLOSING",n.children.forEach((function(n){t.children.find((function(t){return t===n}))||t.children.push(n)})),n.children=[]}},{key:"buildTemplate",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!n)return"";if(!(n instanceof E))throw new Error("Expected Token instance.");var e=function n(e){var r=e.children.map((function(t){return t.children.length?n(t):t.toString()}));return e.toString(t).replace("{slot}",r.join(""))};return e(n)}},{key:"_next",value:function(){if(!this.buf)return null;var n=this.buf.match(m);if(null===n){var t=new E(h,this.buf,this.pos);return this.pos+=this.buf.length,this.buf=null,t}var e,r=[];return 0!==n.index&&r.push(new E(h,this.buf.substring(0,n.index),this.pos)),r.push(new E("/"===(e=n[0])[1]?"CLOSE":"/"===e[e.length-2]?"SELF_CLOSING":"OPEN",n[0],this.pos+n.index)),this.buf=this.buf.substring(n.index+n[0].length),this.pos+=n.index+n[0].length,0===this.buf.length&&(this.buf=null),r}}]),n}();Object.assign(w,{TEXT:h,OPEN:"OPEN",CLOSE:"CLOSE",SELF_CLOSING:"SELF_CLOSING",rxParams:g,rxEnclosure:m,rxOpen:S,rxClose:k,rxSelfclosing:O})}]);